# 📊 Полный анализ проекта BEST PR System
## Сравнительный анализ с конкурентами и новая архитектура

---

## 1. ФИЛОСОФИЯ ПРОЕКТА

### 1.1 Суть проекта
**BEST PR System** — это специализированная система управления PR-отделом студенческой организации BEST Москва, созданная для:
- **Координации работы** 4 координаторов (SMM, Design, Channel, PR-FR) и ~10 активных участников
- **Управления задачами** по созданию контента (посты, дизайн, видео, фотоотчёты)
- **Геймификации** для мотивации участников через баллы, уровни и рейтинг
- **Интеграции с корпоративным Google Drive** для хранения материалов и синхронизации
- **Автоматизации** процессов через Telegram-бота и веб-интерфейс

### 1.2 Ключевые особенности
1. **Локальность и закрытость**: Система создана для конкретного отдела, не для массового рынка
2. **Специализация**: Фокус на задачах PR-контента, а не на продажах/CRM
3. **Геймификация**: Баллы, уровни, рейтинг для мотивации волонтёров
4. **Интеграция с Telegram**: Основной канал коммуникации — Telegram-бот
5. **Google Drive как хранилище**: Использование корпоративного диска для всех материалов
6. **Множественные роли**: Задачи могут требовать участия нескольких координаторов одновременно

### 1.3 Целевая аудитория
- **VP4PR** (1 человек) — полный контроль
- **Координаторы** (4 человека) — управление задачами в своей области
- **Активные участники** (~10 человек) — выполнение задач
- **Новички** (неограниченно) — просмотр задач, регистрация, выполнение WT

---

## 2. СРАВНИТЕЛЬНЫЙ АНАЛИЗ С КОНКУРЕНТАМИ

### 2.1 Битрикс24

#### ✅ Что можно взять:
1. **Интерфейс задач и проектов**
   - Визуальные карточки задач
   - Диаграммы Ганта для таймлайнов
   - Канбан-доски для визуализации статусов
   - Календарь с множественными представлениями

2. **Интеграции**
   - Google Drive интеграция (есть в Битрикс24)
   - Telegram интеграция (есть в Битрикс24)
   - Синхронизация календарей

3. **Управление проектами**
   - Этапы задач (контрольные точки)
   - Назначение исполнителей
   - Отслеживание прогресса

4. **Профили пользователей**
   - Фото, контакты, навыки
   - Портфолио работ
   - Статистика активности

5. **AI-помощник (CoPilot)**
   - Анализ текстов
   - Помощь в составлении задач
   - Обратная связь по материалам

#### ❌ Что НЕ нужно:
1. **CRM-функционал** (сделки, клиенты, воронки продаж) — не применимо
2. **Телефония** — не нужна
3. **Платежи и онлайн-кассы** — не нужны
4. **1С интеграция** — не нужна
5. **Сквозная аналитика продаж** — не применимо
6. **Маркетинговые инструменты** (email-рассылки, лендинги) — не нужны

#### 💡 Что можно улучшить:
1. **Геймификация** — в Битрикс24 слабая, у вас — ключевая фича
2. **Специализация на контенте** — у вас фокус на PR-задачи, у них — общий CRM
3. **Telegram как основной канал** — у них Telegram — один из каналов, у вас — основной
4. **Галерея результатов** — у вас это ключевая фича для мотивации

### 2.2 AMOCRM

#### ✅ Что можно взять:
1. **Визуальные воронки** — можно адаптировать для статусов задач
2. **Автоматизация процессов** — сценарии для напоминаний о дедлайнах
3. **Интеграция с мессенджерами** — у вас уже есть Telegram
4. **Уведомления в реальном времени** — важно для дедлайнов

#### ❌ Что НЕ нужно:
1. **Управление сделками и клиентами** — не применимо
2. **Телефония и звонки** — не нужны
3. **Email-маркетинг** — не нужен
4. **Аналитика продаж** — не применимо

#### 💡 Вывод по AMOCRM:
AMOCRM слишком сфокусирован на продажах. Для вашего проекта не подходит, так как:
- Нет управления проектами (только задачи)
- Нет геймификации
- Нет галереи результатов
- Нет специализации на контенте

### 2.3 Другие бесплатные CRM

#### HubSpot CRM
- ✅ Хорошая интеграция с Google
- ❌ Слишком общий, нет специализации
- ❌ Нет геймификации
- ❌ Нет Telegram-интеграции

#### Zoho CRM
- ✅ Много интеграций
- ❌ Ограничения бесплатной версии (3 пользователя)
- ❌ Нет геймификации
- ❌ Сложная настройка

### 2.4 ИТОГОВОЕ СРАВНЕНИЕ

| Функция | BEST PR System | Битрикс24 | AMOCRM | Вывод |
|---------|----------------|-----------|--------|-------|
| **Управление задачами** | ✅ Специализировано | ✅ Универсально | ⚠️ Базово | Ваше решение лучше для ваших задач |
| **Геймификация** | ✅ Ключевая фича | ⚠️ Слабая | ❌ Нет | **Ваше преимущество** |
| **Telegram-бот** | ✅ Основной канал | ⚠️ Один из каналов | ⚠️ Один из каналов | **Ваше преимущество** |
| **Галерея результатов** | ✅ Ключевая фича | ⚠️ Есть, но не приоритет | ❌ Нет | **Ваше преимущество** |
| **Google Drive интеграция** | ✅ Глубокая | ✅ Есть | ⚠️ Ограниченная | Ваше решение лучше |
| **Специализация на PR-контенте** | ✅ Полная | ❌ Нет | ❌ Нет | **Ваше преимущество** |
| **Бесплатность** | ✅ Полностью | ⚠️ Ограниченная | ❌ Платная | **Ваше преимущество** |
| **Локальность** | ✅ Для вашего отдела | ❌ Общая платформа | ❌ Общая платформа | **Ваше преимущество** |
| **Множественные роли в задачах** | ✅ Ключевая фича | ⚠️ Есть, но сложно | ❌ Нет | **Ваше преимущество** |
| **Выдача оборудования** | ✅ Интегрировано | ❌ Нет | ❌ Нет | **Ваше преимущество** |

### 2.5 КОНКУРЕНТНЫЕ ПРЕИМУЩЕСТВА BEST PR System

1. **Специализация**: Система создана именно для PR-отдела, а не универсальный CRM
2. **Геймификация**: Мотивация через баллы, уровни, рейтинг — ключевая фича
3. **Telegram как основной канал**: Все уведомления и взаимодействие через бота
4. **Интеграция с оборудованием**: Автоматическое предложение оборудования при взятии задач
5. **Галерея результатов**: Показ выполненных работ для мотивации
6. **Бесплатность**: Полностью бесплатно для неограниченного числа пользователей
7. **Локальность**: Система настроена под конкретные процессы отдела
8. **Множественные роли**: Задачи могут требовать SMM + Design + Channel одновременно

### 2.6 РЕКОМЕНДАЦИИ

#### ✅ Что ОСТАВИТЬ и УСИЛИТЬ:
1. **Геймификация** — это ваше главное конкурентное преимущество
2. **Telegram-бот** — основной канал коммуникации, не перегружать
3. **Галерея результатов** — мотивирует новичков
4. **Специализация на PR-контенте** — фокус на ваших задачах
5. **Интеграция с Google Drive** — используйте корпоративный диск
6. **Множественные роли** — ключевая фича для ваших задач

#### ⚠️ Что можно ДОБАВИТЬ из конкурентов:
1. **Визуальные представления** (из Битрикс24):
   - Диаграммы Ганта для таймлайнов
   - Канбан-доски для статусов
   - Календарь с множественными представлениями

2. **AI-помощник** (из Битрикс24 CoPilot):
   - Анализ концептов/сценариев
   - Помощь в составлении задач
   - Проверка на "ИИшность" текстов

3. **Автоматизация** (из AMOCRM):
   - Сценарии напоминаний о дедлайнах
   - Автоматические уведомления

#### ❌ Что НЕ нужно добавлять:
1. **CRM-функционал** (сделки, клиенты) — не применимо
2. **Телефония** — не нужна
3. **Платежи** — не нужны
3. **Email-маркетинг** — не нужен
4. **Сквозная аналитика продаж** — не применимо

---

## 3. НОВАЯ АРХИТЕКТУРА ПРОЕКТА

### 3.1 Общая структура системы

```
┌─────────────────────────────────────────────────────────────┐
│                    BEST PR SYSTEM                           │
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │   Frontend   │  │   Backend    │  │ Telegram Bot │    │
│  │  (React/TS)  │◄─┤  (FastAPI)   │◄─┤  (aiogram)   │    │
│  └──────────────┘  └──────────────┘  └──────────────┘    │
│         │                  │                  │           │
│         └──────────────────┼──────────────────┘           │
│                            │                               │
│                  ┌─────────▼─────────┐                    │
│                  │  PostgreSQL DB    │                    │
│                  └─────────┬─────────┘                    │
│                            │                               │
│                  ┌─────────▼─────────┐                    │
│                  │  Google Drive API │                    │
│                  │  Google Sheets API│                    │
│                  └───────────────────┘                    │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Детальная архитектура Backend

#### 3.2.1 Структура модулей

```
backend/
├── app/
│   ├── main.py                 # Точка входа FastAPI
│   ├── database.py            # Подключение к БД
│   ├── config.py              # Конфигурация
│   │
│   ├── models/                # SQLAlchemy модели
│   │   ├── user.py            # User, UserRole
│   │   ├── task.py            # Task, TaskStage, TaskAssignment
│   │   ├── equipment.py       # Equipment, EquipmentRequest
│   │   ├── event.py           # Event
│   │   ├── gallery.py         # GalleryItem
│   │   ├── gamification.py    # PointsLog, Achievement
│   │   ├── notification.py    # Notification
│   │   ├── telegram.py        # TelegramChat
│   │   ├── file.py            # File (связь с Google Drive)
│   │   ├── activity.py        # ActivityLog
│   │   └── ...
│   │
│   ├── api/                   # API endpoints
│   │   ├── auth.py           # Аутентификация
│   │   ├── tasks.py          # CRUD задач
│   │   ├── calendar.py       # Календарь и таймлайны
│   │   ├── gallery.py        # Галерея проектов
│   │   ├── equipment.py      # Оборудование
│   │   ├── drive.py          # Google Drive интеграция
│   │   ├── gamification.py   # Баллы, рейтинг
│   │   ├── notifications.py  # Уведомления
│   │   ├── support.py        # Поддержка
│   │   ├── ai_assistant.py   # AI-помощник
│   │   └── ...
│   │
│   ├── services/              # Бизнес-логика
│   │   ├── google_drive.py   # Работа с Google Drive
│   │   ├── google_sheets.py  # Работа с Google Sheets
│   │   ├── sync_manager.py   # Синхронизация Drive ↔ System
│   │   ├── notification_service.py  # Отправка уведомлений
│   │   ├── gamification_service.py  # Начисление баллов
│   │   └── ai_service.py     # AI-интеграция
│   │
│   ├── utils/                 # Утилиты
│   │   ├── permissions.py    # Проверка прав доступа
│   │   ├── validators.py     # Валидация данных
│   │   └── helpers.py        # Вспомогательные функции
│   │
│   └── schemas/               # Pydantic схемы
│       ├── user.py
│       ├── task.py
│       └── ...
│
├── bot/                       # Telegram Bot
│   ├── main.py               # Точка входа бота
│   ├── handlers/             # Обработчики команд
│   │   ├── start.py         # /start, регистрация
│   │   ├── tasks.py         # Работа с задачами
│   │   ├── equipment.py     # Выдача оборудования
│   │   ├── support.py        # Поддержка
│   │   ├── admin.py          # Админ-команды
│   │   └── ...
│   ├── states.py             # FSM состояния
│   ├── keyboards.py          # Клавиатуры
│   └── messages.py           # Текстовые сообщения
│
├── alembic/                   # Миграции БД
└── requirements.txt
```

### 3.3 Детальная архитектура Frontend

```
frontend/
├── src/
│   ├── App.tsx               # Главный компонент
│   ├── main.tsx              # Точка входа
│   │
│   ├── pages/                # Страницы
│   │   ├── Home.tsx         # Главная (разная для ролей)
│   │   ├── Tasks.tsx        # Список задач
│   │   ├── TaskDetail.tsx   # Карточка задачи
│   │   ├── Calendar.tsx      # Календарь (Period + View)
│   │   ├── Gallery.tsx       # Галерея проектов
│   │   ├── Equipment.tsx     # Оборудование
│   │   ├── Settings.tsx      # Настройки профиля
│   │   ├── UserMonitoring.tsx # Мониторинг (координаторы)
│   │   ├── Support.tsx       # Поддержка
│   │   ├── Notifications.tsx # Уведомления (полноэкранный)
│   │   └── ...
│   │
│   ├── components/           # Компоненты
│   │   ├── layout/
│   │   │   ├── Layout.tsx   # Основной layout
│   │   │   ├── Header.tsx   # Верхняя панель
│   │   │   └── Sidebar.tsx   # Боковое меню
│   │   ├── TaskCard.tsx     # Карточка задачи
│   │   ├── CalendarView.tsx # Представления календаря
│   │   ├── ChatWidget.tsx   # Чат поддержки (справа снизу)
│   │   ├── TourGuide.tsx    # Интерактивный гайд
│   │   ├── Cursor2.tsx      # 3D курсор
│   │   └── ...
│   │
│   ├── services/             # API клиенты
│   │   ├── api.ts           # Базовый клиент
│   │   ├── tasks.ts
│   │   ├── calendar.ts
│   │   ├── gallery.ts
│   │   ├── equipment.ts
│   │   ├── notifications.ts
│   │   └── ...
│   │
│   ├── store/                # Zustand stores
│   │   ├── authStore.ts     # Аутентификация
│   │   └── themeStore.ts    # Тема оформления
│   │
│   ├── hooks/                # React hooks
│   │   ├── useTour.ts       # Гайд по сайту
│   │   └── ...
│   │
│   └── types/                # TypeScript типы
│       ├── user.ts
│       ├── task.ts
│       └── ...
│
└── package.json
```

### 3.4 Архитектура базы данных

#### 3.4.1 Основные таблицы и связи

```
┌─────────────┐
│    User     │
│─────────────│
│ id (PK)     │
│ telegram_id │
│ full_name   │
│ role        │──┐
│ level       │  │
│ points      │  │
│ is_active   │  │
└─────────────┘  │
                 │
      ┌──────────┴──────────┐
      │                     │
┌─────▼──────┐    ┌─────────▼─────────┐
│   Task     │    │ TaskAssignment    │
│────────────│    │───────────────────│
│ id (PK)    │◄───┤ task_id (FK)      │
│ title      │    │ user_id (FK)      │
│ type       │    │ role              │
│ status     │    │ status            │
│ priority   │    │ assigned_at       │
│ start_date │    └───────────────────┘
│ due_date   │
│ coordinator│
│ points     │
└─────┬──────┘
      │
┌─────▼──────┐    ┌──────────────┐
│ TaskStage  │    │ Equipment    │
│────────────│    │──────────────│
│ id (PK)    │    │ id (PK)      │
│ task_id(FK)│    │ name         │
│ name       │    │ category     │
│ due_date   │    │ quantity     │
│ status     │    │ status       │
└────────────┘    └──────┬───────┘
                         │
                ┌────────▼──────────┐
                │ EquipmentRequest  │
                │───────────────────│
                │ id (PK)           │
                │ equipment_id (FK) │
                │ task_id (FK)      │
                │ user_id (FK)      │
                │ start_date        │
                │ end_date          │
                │ status            │
                └───────────────────┘
```

#### 3.4.2 Полная схема БД

```
Users
├── id (UUID, PK)
├── telegram_id (BigInteger, UNIQUE)
├── username, full_name
├── role (Enum: NOVICE, PARTICIPANT, COORDINATOR_*, VP4PR)
├── level, points, streak_days
├── avatar_url, bio, contacts (JSON), skills (ARRAY), portfolio (JSON)
├── is_active, is_blocked
└── created_at, updated_at, last_activity_at

Tasks
├── id (UUID, PK)
├── title, description
├── type (Enum: SMM, DESIGN, CHANNEL, PRFR)
├── status (Enum: DRAFT, OPEN, ASSIGNED, IN_PROGRESS, REVIEW, COMPLETED, CANCELLED)
├── priority (Enum: LOW, MEDIUM, HIGH, CRITICAL)
├── start_date, due_date
├── coordinator_id (FK → Users)
├── points (Integer) - общие баллы за задачу
├── points_by_stage (JSON) - баллы по этапам
├── image_url, example_project_ids (ARRAY)
├── tz_by_role (JSON) - ТЗ для каждой роли
└── created_at, updated_at

TaskStages
├── id (UUID, PK)
├── task_id (FK → Tasks)
├── stage_name, description
├── due_date, status (Enum: PENDING, IN_PROGRESS, COMPLETED)
├── sort_order
└── created_at, updated_at

TaskAssignments
├── id (UUID, PK)
├── task_id (FK → Tasks)
├── user_id (FK → Users)
├── role (Enum: SMM, DESIGN, CHANNEL, PRFR)
├── status (Enum: ASSIGNED, IN_PROGRESS, COMPLETED, CANCELLED)
├── assigned_at, completed_at
└── points_earned (Integer)

Equipment
├── id (UUID, PK)
├── name, category (Enum), quantity
├── specs (JSON), description
├── status (Enum: AVAILABLE, RENTED, MAINTENANCE, BROKEN)
└── created_at, updated_at

EquipmentRequest
├── id (UUID, PK)
├── equipment_id (FK → Equipment)
├── task_id (FK → Tasks, nullable)
├── user_id (FK → Users)
├── start_date, end_date, purpose
├── status (Enum: PENDING, APPROVED, REJECTED, ACTIVE, COMPLETED, CANCELLED)
└── created_at, updated_at

Events
├── id (UUID, PK)
├── name, description
├── date_start, date_end
└── created_at, updated_at

GalleryItem
├── id (UUID, PK)
├── title, description
├── category (Enum: PHOTO, VIDEO, FINAL, WIP)
├── tags (ARRAY), metrics (JSON)
├── task_id (FK → Tasks, nullable)
├── file_urls (ARRAY) - ссылки на Google Drive
└── created_at, updated_at

PointsLog
├── id (UUID, PK)
├── user_id (FK → Users)
├── task_id (FK → Tasks, nullable)
├── points (Integer), reason (String)
└── created_at

Notifications
├── id (UUID, PK)
├── user_id (FK → Users)
├── type, title, message
├── data (JSON), is_read, is_important
└── created_at

TelegramChat
├── id (UUID, PK)
├── chat_id (BigInteger) - ID чата в Telegram
├── chat_type (Enum: GENERAL, TASK, COORDINATORS)
├── task_id (FK → Tasks, nullable)
├── invite_link, exists
└── created_at, updated_at

Files (Google Drive)
├── id (UUID, PK)
├── drive_file_id (String) - ID файла в Google Drive
├── task_id (FK → Tasks, nullable)
├── file_name, file_type, file_url
├── folder_path (String)
└── created_at, updated_at

ActivityLog
├── id (UUID, PK)
├── user_id (FK → Users)
├── action_type, entity_type, entity_id
├── details (JSON)
└── created_at
```

### 3.5 Архитектура Telegram Bot

#### 3.5.1 Структура бота

```
bot/
├── main.py                    # Запуск бота
├── handlers/
│   ├── start.py              # /start, регистрация, вход
│   ├── tasks.py              # Просмотр задач, взятие задачи
│   ├── equipment.py          # Выдача оборудования
│   ├── support.py            # Поддержка
│   ├── admin.py              # Админ-команды (VP4PR)
│   ├── coordinators.py       # Команды координаторов
│   └── chat_management.py    # Управление чатами
│
├── states.py                  # FSM состояния
│   ├── RegistrationStates
│   ├── TaskCreationStates
│   ├── EquipmentRequestStates
│   └── SupportStates
│
├── keyboards.py               # Inline и Reply клавиатуры
│   ├── main_menu()
│   ├── task_keyboard()
│   ├── equipment_keyboard()
│   └── ...
│
└── messages.py                # Текстовые сообщения
    ├── WELCOME_MESSAGE
    ├── REGISTRATION_MESSAGE
    └── ...
```

#### 3.5.2 Потоки взаимодействия

**1. Регистрация нового пользователя:**
```
Пользователь → /start → Проверка регистрации
    │
    ├─ Не зарегистрирован
    │   ├─ Приветственное сообщение
    │   ├─ Мотивация зарегистрироваться
    │   ├─ Кнопка "Зарегистрироваться"
    │   ├─ Ввод ФИО + согласие
    │   ├─ Заявка отправлена VP4PR
    │   ├─ Уведомление VP4PR в боте
    │   ├─ VP4PR одобряет/отклоняет
    │   └─ Уведомление пользователю
    │
    └─ Зарегистрирован
        ├─ Подтверждение входа (если с сайта)
        └─ Главное меню
```

**2. Взятие задачи:**
```
Пользователь → "Посмотреть задачи" → Список задач
    │
    ├─ Выбор задачи
    │   ├─ Просмотр карточки (ТЗ, дедлайны, этапы)
    │   ├─ Кнопка "Взять задачу"
    │   ├─ Выбор роли (если задача множественная)
    │   ├─ Заявка отправлена координатору
    │   ├─ Координатор одобряет/отклоняет
    │   ├─ Если одобрено:
    │   │   ├─ Пользователь добавлен в чат задачи
    │   │   ├─ Предложение оборудования (если Channel)
    │   │   └─ Уведомления о дедлайнах
    │   └─ Если отклонено: уведомление с причиной
```

**3. Выдача оборудования:**
```
Пользователь → "Оборудование" → Доступное оборудование
    │
    ├─ Выбор дат съёмки
    ├─ Выбор оборудования (корзина)
    │   ├─ При выборе камеры → предложение SD-карты и объектива
    │   └─ При выборе объектива → проверка совместимости
    ├─ Подтверждение заявки
    ├─ Заявка отправлена координатору
    └─ Одобрение/отклонение → уведомление
```

**4. Управление чатами:**
```
Система → Создание чата задачи
    │
    ├─ Добавление координаторов (автоматически)
    ├─ Добавление исполнителей (после одобрения)
    ├─ Модерация сообщений (бот)
    └─ Синхронизация с сайтом
```

### 3.6 Архитектура Google Drive интеграции

#### 3.6.1 Структура папок

```
Google Drive (Root: 1Zxtqs4otBMhltOFCJG0-y8gBHWXvQGzI)
│
├── Tasks/                          # Все задачи
│   ├── {task_id}/                  # Папка задачи
│   │   ├── task_description.md     # Описание задачи
│   │   ├── tz_smm.md              # ТЗ для SMM
│   │   ├── tz_design.md           # ТЗ для Design
│   │   ├── tz_channel.md          # ТЗ для Channel
│   │   ├── tz_prfr.md             # ТЗ для PR-FR
│   │   ├── materials/              # Материалы задачи
│   │   │   ├── concepts/          # Концепты/сценарии
│   │   │   ├── drafts/            # Черновики
│   │   │   └── final/             # Финальные материалы
│   │   └── stages/                # Материалы по этапам
│   │
│   └── Archive/                    # Архив завершённых задач
│
├── Gallery/                        # Галерея проектов
│   ├── {project_id}/               # Папка проекта
│   │   ├── description.md         # Описание проекта
│   │   ├── photos/                # Фото
│   │   ├── videos/                # Видео
│   │   └── metrics.json           # Метрики (просмотры, лайки)
│   │
│   └── Manual/                     # Ручные добавления (старые проекты)
│
├── Equipment/                      # Оборудование
│   ├── requests/                   # Заявки на оборудование
│   └── calendar/                   # Календарь занятости
│
├── Users/                          # Профили пользователей
│   └── {user_id}/                  # Папка пользователя
│       ├── avatar.jpg             # Аватар
│       └── portfolio/             # Портфолио
│
└── Timeline/                        # Таблицы таймлайнов
    └── semester_timeline.xlsx      # Google Sheets
        ├── Общий                  # Лист: общий таймлайн
        ├── SMM                    # Лист: SMM задачи
        ├── Design                 # Лист: Design задачи
        ├── Channel                # Лист: Channel задачи
        └── PR-FR                  # Лист: PR-FR задачи
```

#### 3.6.2 Синхронизация Drive ↔ System

**Двусторонняя синхронизация:**

```
┌─────────────────┐         ┌─────────────────┐
│  BEST PR System │◄────────┤  Google Drive    │
│                 │         │                 │
│  • Tasks        │         │  • Folders      │
│  • Files        │         │  • Files        │
│  • Timeline     │         │  • Sheets       │
└─────────────────┘         └─────────────────┘
         │                           │
         └───────────┬───────────────┘
                     │
            ┌────────▼────────┐
            │  Sync Manager   │
            │─────────────────│
            │ • Webhooks      │
            │ • Polling       │
            │ • Conflict      │
            │   Resolution    │
            └─────────────────┘
```

**Механизм синхронизации:**

1. **Изменения в системе → Drive:**
   - Создание задачи → создание папки + файлов
   - Изменение ТЗ → обновление файлов
   - Изменение дедлайна → обновление Sheets
   - Загрузка материала → загрузка в папку задачи

2. **Изменения в Drive → система:**
   - Webhook от Google Drive API
   - Периодический polling (каждые 5 минут)
   - Обнаружение изменений → обновление БД
   - Уведомления пользователям

3. **Конфликты:**
   - Приоритет: последнее изменение
   - Логирование конфликтов
   - Уведомление VP4PR о конфликтах

### 3.7 Архитектура Google Sheets синхронизации

#### 3.7.1 Структура таблицы

```
semester_timeline.xlsx
│
├── Лист "Общий"
│   │ Дата │ Задача 1 │ Задача 2 │ ...
│   ├──────┼──────────┼──────────┼────
│   │ 1 фев│ [BIP]    │          │
│   │ 2 фев│ [BIP]    │          │
│   │ ...  │          │          │
│
├── Лист "SMM"
│   │ Дата │ Пост 1 │ Пост 2 │ ...
│
├── Лист "Design"
│   │ Дата │ Дизайн 1 │ Дизайн 2 │ ...
│
├── Лист "Channel"
│   │ Дата │ Видео 1 │ Видео 2 │ ...
│
└── Лист "PR-FR"
    │ Дата │ Задача 1 │ Задача 2 │ ...
```

**Цветовая кодировка:**
- 🟢 Зелёный: процесс (написание, съёмка, монтаж)
- 🟡 Жёлтый: согласование, буферная зона
- 🔴 Красный: дедлайн, мероприятие

**Гиперссылки:**
- Ячейка задачи → ссылка на файл задачи в Drive
- Клик → открытие карточки задачи на сайте

#### 3.7.2 Механизм синхронизации

1. **Система → Sheets:**
   - Создание задачи → добавление в ячейки
   - Изменение дедлайна → обновление ячеек
   - Изменение статуса → изменение цвета
   - Создание гиперссылок на файлы

2. **Sheets → система:**
   - Обнаружение изменений в ячейках
   - Парсинг изменений (даты, статусы)
   - Обновление БД
   - Уведомления координаторам

3. **Rate Limiting:**
   - Максимум 60 запросов в минуту (Google API)
   - Очередь запросов
   - Батчинг изменений

### 3.8 Архитектура AI-интеграции

#### 3.8.1 Варианты AI (в рамках бюджета ~1699₽/мес)

**Рекомендация: OpenRouter API**

**Почему:**
- Доступ к множеству моделей (GPT-4, Claude, Llama)
- Гибкая оплата (~$0.10-0.50 за 1M токенов)
- В рамках бюджета при умеренном использовании
- Лучшее качество, чем локальные модели

**Альтернативы:**
1. **YandexGPT API** (~$0.05 за 1K токенов)
   - ✅ Локальная альтернатива
   - ✅ Дешевле
   - ⚠️ Меньше функций

2. **Groq API** (~$0.27 за 1M токенов)
   - ✅ Очень быстро
   - ✅ Дешево
   - ⚠️ Меньше контекста

3. **Ollama (локально)**
   - ✅ Бесплатно
   - ❌ Нужен сервер
   - ❌ Меньше качество

#### 3.8.2 Использование AI

**1. Анализ описаний задач:**
```
Задача → AI → Категоризация, извлечение ключевых слов
```

**2. Помощь координаторам:**
```
Концепт/сценарий → AI → Анализ, структурирование, правки
```

**3. Проверка на "ИИшность":**
```
Текст → AI → Оценка (0-100%), рекомендации
```

**4. AI-чат для координаторов:**
```
Координатор → AI → Помощь в составлении задач, анализ материалов
```

### 3.9 Архитектура уведомлений

#### 3.9.1 Типы уведомлений

1. **Важные (is_important = true):**
   - Дедлайны задач (за 3 дня, за 1 день, просрочено)
   - Одобрение/отклонение заявок
   - Изменения в задачах (дедлайны, статусы)

2. **Обычные:**
   - Новые задачи
   - Сообщения в чате задачи
   - Обновления рейтинга
   - Новые пользователи

#### 3.9.2 Каналы доставки

```
Notification Service
    │
    ├─ Telegram Bot (push)
    │   └─ Отправка через Bot API
    │
    ├─ Website (in-app)
    │   └─ WebSocket / Polling
    │
    └─ Email (опционально)
        └─ Для критичных уведомлений
```

### 3.10 Визуализация архитектуры

#### 3.10.1 Поток данных при создании задачи

```
VP4PR/Координатор
    │
    ├─ [Создание задачи]
    │   │
    │   ├─ Backend API
    │   │   ├─ Создание записи в БД
    │   │   ├─ Создание папки в Google Drive
    │   │   ├─ Создание файлов ТЗ
    │   │   ├─ Обновление Google Sheets
    │   │   └─ Генерация уведомлений
    │   │
    │   └─ Telegram Bot
    │       ├─ Уведомление координаторам
    │       └─ Уведомление подходящим пользователям
    │
    └─ [Пользователь берёт задачу]
        │
        ├─ Backend API
        │   ├─ Создание TaskAssignment
        │   ├─ Создание чата задачи (Telegram)
        │   ├─ Добавление пользователя в чат
        │   ├─ Предложение оборудования (если Channel)
        │   └─ Уведомления
        │
        └─ Google Drive
            └─ Предоставление доступа к папке задачи
```

#### 3.10.2 Поток синхронизации Google Drive

```
Изменение в системе
    │
    ├─ Task updated
    │   ├─ Обновление БД
    │   ├─ Обновление файлов в Drive
    │   ├─ Обновление Sheets
    │   └─ Уведомления
    │
Изменение в Drive (Webhook/Polling)
    │
    ├─ File created/updated
    │   ├─ Парсинг изменений
    │   ├─ Обновление БД
    │   ├─ Уведомления пользователям
    │   └─ Обновление Sheets (если нужно)
    │
Изменение в Sheets
    │
    ├─ Cell updated
    │   ├─ Парсинг изменений
    │   ├─ Обновление БД (дедлайны, статусы)
    │   └─ Уведомления координаторам
```

---

## 4. РЕКОМЕНДАЦИИ ПО РЕАЛИЗАЦИИ

### 4.1 Приоритеты разработки

**Фаза 1: Базовая функциональность (1-2 недели)**
1. ✅ Интеграция с Google Drive (базовая)
2. ✅ Создание задач (бот + сайт)
3. ✅ Карточки задач с ТЗ по ролям
4. ✅ Календарь и таймлайны
5. ✅ Галерея проектов

**Фаза 2: Интеграции (1 неделя)**
1. ✅ Полная синхронизация Google Drive ↔ System
2. ✅ Синхронизация Google Sheets
3. ✅ Интеграция выдачи оборудования
4. ✅ Управление чатами Telegram

**Фаза 3: Улучшения (1 неделя)**
1. ✅ Геймификация (баллы, уровни, рейтинг)
2. ✅ Мониторинг пользователей
3. ✅ Профили пользователей
4. ✅ Уведомления

**Фаза 4: AI и финальные улучшения (1-2 недели)**
1. ✅ AI-интеграция
2. ✅ AI-чат для координаторов
3. ✅ Автоматизация напоминаний
4. ✅ Telegram Mini App (опционально)

### 4.2 Технические рекомендации

#### 4.2.1 Google Drive API
- **Использовать 5 Service Accounts** для обхода rate limits
- **Кэширование** метаданных файлов
- **Webhooks** для отслеживания изменений (если возможно)
- **Polling** каждые 5 минут как fallback

#### 4.2.2 Google Sheets API
- **Батчинг** изменений (не более 60 запросов/минуту)
- **Очередь запросов** для синхронизации
- **Цветовая кодировка** через Conditional Formatting API
- **Гиперссылки** через формулу =HYPERLINK()

#### 4.2.3 Telegram Bot
- **FSM** для многошаговых процессов
- **Удаление старых сообщений** для чистоты интерфейса
- **Inline клавиатуры** для навигации
- **Группировка уведомлений** (не спамить)

#### 4.2.4 Frontend
- **TanStack Query** для кэширования данных
- **WebSocket** для real-time уведомлений
- **Оптимизация** для мобильных устройств
- **Lazy loading** для больших списков

### 4.3 Что убрать/упростить

#### ❌ Убрать:
1. **Избыточные функции из Битрикс24:**
   - CRM-функционал (сделки, клиенты)
   - Телефония
   - Платежи
   - Email-маркетинг

2. **Сложные функции:**
   - Слишком сложная автоматизация (пока)
   - Избыточная аналитика

#### ✅ Упростить:
1. **Календарь:**
   - Период: Семестр / Месяц / Неделя
   - Представление: Таймлайн / Список
   - Убрать избыточные представления (Gantt, Kanban как отдельные)

2. **Уведомления:**
   - Фильтрация по важности
   - Группировка похожих уведомлений

3. **Интерфейс:**
   - Разные главные страницы для разных ролей
   - Скрытие недоступных функций

---

## 5. ВЫВОДЫ И РЕКОМЕНДАЦИИ

### 5.1 Стоит ли игра свеч?

**✅ ДА, определённо стоит!**

**Почему:**
1. **Специализация**: Ваша система создана именно для PR-отдела, а не универсальный CRM
2. **Конкурентные преимущества**: Геймификация, Telegram-интеграция, галерея результатов
3. **Бесплатность**: Полностью бесплатно для неограниченного числа пользователей
4. **Локальность**: Система настроена под ваши процессы
5. **Опыт**: У вас уже есть опыт с BEST Channel Bot

**Конкуренты не подходят, потому что:**
- Битрикс24: слишком общий, нет специализации на PR-контенте
- AMOCRM: фокус на продажах, не на управлении проектами
- Другие: нет геймификации, нет Telegram-интеграции

### 5.2 Что делать дальше?

1. **Продолжить разработку** по новой архитектуре
2. **Сфокусироваться на ключевых фичах:**
   - Геймификация
   - Telegram-бот
   - Google Drive интеграция
   - Галерея результатов

3. **Не перегружать** избыточными функциями из конкурентов
4. **Использовать лучшие практики** из Битрикс24 (интерфейс, представления)
5. **Добавить AI** в последнюю очередь, когда база готова

### 5.3 Риски и как их минимизировать

**Риск 1: Перегрузка функционалом**
- **Решение**: Следовать приоритетам, не добавлять лишнее

**Риск 2: Проблемы с синхронизацией Google Drive**
- **Решение**: Тщательное тестирование, обработка ошибок, логирование

**Риск 3: Сложность для пользователей**
- **Решение**: Интерактивный гайд, простота интерфейса, помощь

**Риск 4: Бюджет на AI**
- **Решение**: Начать с OpenRouter, мониторить использование, оптимизировать запросы

---

## 6. НОВАЯ АРХИТЕКТУРА (ДЕТАЛЬНАЯ)

### 6.1 Полная схема системы

```
┌─────────────────────────────────────────────────────────────────┐
│                      BEST PR SYSTEM                             │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │                    FRONTEND (React)                      │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐ │  │
│  │  │   Home   │  │  Tasks   │  │ Calendar │  │ Gallery │ │  │
│  │  └──────────┘  └──────────┘  └──────────┘  └─────────┘ │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐ │  │
│  │  │Equipment │  │ Settings │  │  Users   │  │ Support │ │  │
│  │  └──────────┘  └──────────┘  └──────────┘  └─────────┘ │  │
│  │                                                           │  │
│  │  Components: ChatWidget, TourGuide, Cursor2, ...        │  │
│  └───────────────────────┬─────────────────────────────────┘  │
│                            │                                     │
│  ┌─────────────────────────▼─────────────────────────────────┐  │
│  │                  BACKEND (FastAPI)                        │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐         │  │
│  │  │   API      │  │  Services  │  │   Models   │         │  │
│  │  │  Endpoints │  │  (Logic)   │  │   (DB)     │         │  │
│  │  └────────────┘  └────────────┘  └────────────┘         │  │
│  │                                                            │  │
│  │  ┌────────────────────────────────────────────────────┐  │  │
│  │  │         Google Drive/Sheets Integration            │  │  │
│  │  │  • Sync Manager • File Manager • Sheets Manager    │  │  │
│  │  └────────────────────────────────────────────────────┘  │  │
│  │                                                            │  │
│  │  ┌────────────────────────────────────────────────────┐  │  │
│  │  │              AI Service (OpenRouter)                 │  │  │
│  │  │  • Analysis • Categorization • Text Editing         │  │  │
│  │  └────────────────────────────────────────────────────┘  │  │
│  └───────────────────────┬───────────────────────────────────┘  │
│                            │                                       │
│  ┌─────────────────────────▼─────────────────────────────────┐  │
│  │              TELEGRAM BOT (aiogram)                      │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐         │  │
│  │  │  Handlers  │  │   States   │  │ Keyboards  │         │  │
│  │  │  (Commands)│  │   (FSM)    │  │  (Buttons) │         │  │
│  │  └────────────┘  └────────────┘  └────────────┘         │  │
│  │                                                            │  │
│  │  ┌────────────────────────────────────────────────────┐  │  │
│  │  │         Chat Management (Telegram API)            │  │  │
│  │  │  • Create chats • Add users • Moderate            │  │  │
│  │  └────────────────────────────────────────────────────┘  │  │
│  └───────────────────────┬───────────────────────────────────┘  │
│                            │                                       │
│                  ┌─────────▼─────────┐                           │
│                  │  PostgreSQL DB    │                           │
│                  │  • Users          │                           │
│                  │  • Tasks          │                           │
│                  │  • Equipment     │                           │
│                  │  • Gallery       │                           │
│                  │  • Notifications │                           │
│                  └──────────────────┘                           │
│                                                                   │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │              EXTERNAL SERVICES                             │ │
│  │  • Google Drive API (5 Service Accounts)                   │ │
│  │  • Google Sheets API                                       │ │
│  │  • Telegram Bot API                                        │ │
│  │  • OpenRouter API (AI)                                     │ │
│  └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 Детальные потоки данных

#### 6.2.1 Создание задачи (VP4PR/Координатор)

```
1. VP4PR/Координатор создаёт задачу
   │
   ├─ [Веб-интерфейс] или [Telegram Bot]
   │   │
   │   └─ POST /api/v1/tasks
   │       │
   │       ├─ Валидация данных
   │       ├─ Создание записи в БД (Task)
   │       ├─ Создание этапов (TaskStages)
   │       │
   │       ├─ Google Drive Service
   │       │   ├─ Создание папки /Tasks/{task_id}/
   │       │   ├─ Создание файлов ТЗ (tz_smm.md, tz_design.md, ...)
   │       │   └─ Создание подпапок (materials/, stages/)
   │       │
   │       ├─ Google Sheets Service
   │       │   ├─ Добавление задачи в ячейки (по датам)
   │       │   ├─ Окрашивание ячеек (по статусам)
   │       │   └─ Создание гиперссылок на файлы
   │       │
   │       ├─ Notification Service
   │       │   ├─ Уведомление координаторам
   │       │   ├─ Уведомление подходящим пользователям
   │       │   └─ Уведомление в Telegram
   │       │
   │       └─ Response → Frontend/Bot
```

#### 6.2.2 Взятие задачи (Пользователь)

```
1. Пользователь просматривает задачи
   │
   ├─ GET /api/v1/tasks (фильтры: type, status, priority)
   │   └─ Response → Список задач
   │
2. Пользователь выбирает задачу
   │
   ├─ GET /api/v1/tasks/{task_id}
   │   └─ Response → Карточка задачи (ТЗ, этапы, дедлайны)
   │
3. Пользователь нажимает "Взять задачу"
   │
   ├─ POST /api/v1/tasks/{task_id}/assign
   │   │
   │   ├─ Проверка прав доступа
   │   ├─ Создание TaskAssignment (статус: ASSIGNED)
   │   │
   │   ├─ Notification Service
   │   │   ├─ Уведомление координатору задачи
   │   │   └─ "Пользователь X хочет взять задачу Y"
   │   │
   │   └─ Response → "Заявка отправлена координатору"
   │
4. Координатор одобряет заявку
   │
   ├─ PATCH /api/v1/tasks/{task_id}/assignments/{assignment_id}/approve
   │   │
   │   ├─ Обновление TaskAssignment (статус: ASSIGNED → IN_PROGRESS)
   │   │
   │   ├─ Telegram Chat Service
   │   │   ├─ Проверка существования чата задачи
   │   │   ├─ Создание чата (если не существует)
   │   │   ├─ Добавление координаторов в чат
   │   │   ├─ Добавление пользователя в чат
   │   │   └─ Отправка приветственного сообщения
   │   │
   │   ├─ Equipment Service (если задача Channel)
   │   │   └─ Предложение оборудования через бота
   │   │
   │   ├─ Google Drive Service
   │   │   └─ Предоставление доступа к папке задачи
   │   │
   │   ├─ Notification Service
   │   │   ├─ Уведомление пользователю об одобрении
   │   │   └─ Уведомления о дедлайнах (за 3 дня, за 1 день)
   │   │
   │   └─ Response → "Задача назначена"
```

#### 6.2.3 Синхронизация Google Drive

```
Изменение в системе
    │
    ├─ Task updated
    │   ├─ Обновление БД
    │   ├─ Google Drive Service
    │   │   ├─ Обновление файлов ТЗ в Drive
    │   │   └─ Обновление метаданных
    │   ├─ Google Sheets Service
    │   │   ├─ Обновление ячеек (даты, статусы)
    │   │   └─ Обновление цветов
    │   └─ Notification Service
    │       └─ Уведомления исполнителям
    │
Изменение в Drive (Webhook/Polling)
    │
    ├─ File created/updated/deleted
    │   ├─ Google Drive Service
    │   │   ├─ Получение метаданных файла
    │   │   ├─ Определение задачи (по папке)
    │   │   └─ Обновление БД (Files table)
    │   ├─ Notification Service
    │   │   └─ Уведомления координаторам
    │   └─ Если файл в materials/ → обновление Gallery
    │
Изменение в Sheets
    │
    ├─ Cell updated (даты, статусы)
    │   ├─ Google Sheets Service
    │   │   ├─ Парсинг изменений
    │   │   ├─ Определение задачи (по ячейке)
    │   │   └─ Обновление БД (Task, TaskStage)
    │   └─ Notification Service
    │       └─ Уведомления координаторам и исполнителям
```

### 6.3 Детальная структура API

#### 6.3.1 Tasks API

```
GET    /api/v1/tasks                    # Список задач (с фильтрами)
GET    /api/v1/tasks/{task_id}          # Карточка задачи
POST   /api/v1/tasks                    # Создание задачи (координаторы)
PATCH  /api/v1/tasks/{task_id}          # Обновление задачи
DELETE /api/v1/tasks/{task_id}          # Удаление задачи (VP4PR)

POST   /api/v1/tasks/{task_id}/assign   # Взять задачу
PATCH  /api/v1/tasks/{task_id}/assignments/{assignment_id}/approve   # Одобрить
PATCH  /api/v1/tasks/{task_id}/assignments/{assignment_id}/reject    # Отклонить

GET    /api/v1/tasks/{task_id}/stages   # Этапы задачи
POST   /api/v1/tasks/{task_id}/stages   # Создать этап
PATCH  /api/v1/tasks/{task_id}/stages/{stage_id}  # Обновить этап

GET    /api/v1/tasks/{task_id}/files    # Файлы задачи (из Drive)
POST   /api/v1/tasks/{task_id}/files    # Загрузить файл
DELETE /api/v1/tasks/{task_id}/files/{file_id}  # Удалить файл
```

#### 6.3.2 Calendar API

```
GET    /api/v1/calendar                 # Календарь (общий)
GET    /api/v1/calendar/by-role/{role}  # Календарь по роли
POST   /api/v1/calendar/sync/sheets     # Синхронизация с Sheets
```

#### 6.3.3 Equipment API

```
GET    /api/v1/equipment                # Список оборудования
GET    /api/v1/equipment/available      # Доступное оборудование (по датам)
POST   /api/v1/equipment/requests       # Подать заявку
GET    /api/v1/equipment/requests       # Мои заявки
GET    /api/v1/equipment/requests/all   # Все заявки (координаторы)
POST   /api/v1/equipment/requests/{request_id}/approve   # Одобрить
POST   /api/v1/equipment/requests/{request_id}/reject    # Отклонить
```

#### 6.3.4 Gallery API

```
GET    /api/v1/gallery                  # Список проектов
GET    /api/v1/gallery/{item_id}        # Детали проекта
POST   /api/v1/gallery                  # Добавить проект (VP4PR)
PATCH  /api/v1/gallery/{item_id}        # Обновить проект
DELETE /api/v1/gallery/{item_id}         # Удалить проект
```

#### 6.3.5 Drive API

```
GET    /api/v1/drive/tasks/{task_id}/files    # Файлы задачи
POST   /api/v1/drive/tasks/{task_id}/upload   # Загрузить файл
GET    /api/v1/drive/sync                      # Запустить синхронизацию
```

#### 6.3.6 AI Assistant API

```
POST   /api/v1/ai/analyze-task          # Анализ описания задачи
POST   /api/v1/ai/analyze-concept       # Анализ концепта/сценария
POST   /api/v1/ai/edit-text             # Правка текста
POST   /api/v1/ai/check-ai-ness         # Проверка на "ИИшность"
POST   /api/v1/ai/chat                  # AI-чат (координаторы)
```

### 6.4 Детальная структура Telegram Bot

#### 6.4.1 Команды бота

```
/start                    # Начало работы, регистрация, вход
/tasks                    # Список задач
/my_tasks                 # Мои задачи
/equipment                # Оборудование
/support                  # Поддержка
/profile                  # Профиль
/leaderboard              # Рейтинг
/help                     # Помощь

# Админ-команды (VP4PR)
/admin                    # Админ-панель
/pending_registrations    # Заявки на регистрацию
/pending_assignments      # Заявки на задачи
/stats                    # Статистика

# Команды координаторов
/coordinator_tasks        # Задачи координатора
/approve_assignment      # Одобрить заявку на задачу
/reject_assignment       # Отклонить заявку
```

#### 6.4.2 FSM состояния

```python
# Регистрация
class RegistrationStates(StatesGroup):
    waiting_for_fio = State()
    waiting_for_consent = State()

# Создание задачи
class TaskCreationStates(StatesGroup):
    waiting_for_title = State()
    waiting_for_type = State()
    waiting_for_description = State()
    waiting_for_deadline = State()
    waiting_for_stages = State()
    waiting_for_tz = State()
    waiting_for_files = State()

# Выдача оборудования
class EquipmentRequestStates(StatesGroup):
    waiting_for_dates = State()
    waiting_for_equipment = State()
    waiting_for_purpose = State()
    waiting_for_confirmation = State()
```

### 6.5 Детальная структура Frontend

#### 6.5.1 Страницы и их функции

**Home.tsx** (разная для ролей):
- Незарегистрированные: мотивация, список задач, регистрация
- Зарегистрированные: статистика, активные задачи, рейтинг
- Координаторы: панель координатора, задачи подчинённых
- VP4PR: полная панель управления

**Tasks.tsx**:
- Список задач с фильтрами (тип, статус, приоритет)
- Карточки задач
- Сортировка (по дате, приоритету, релевантности)

**TaskDetail.tsx**:
- Полная карточка задачи
- Переключение ролей (SMM/Design/Channel/PR-FR) → разные ТЗ
- Этапы с прогрессом
- Файлы из Google Drive
- Примеры прошлых работ
- Чат задачи (если назначен)

**Calendar.tsx**:
- Период: Семестр / Месяц / Неделя
- Представление: Таймлайн / Список
- Фильтры: Тип задач, Детализация
- Навигация: ← → Сегодня
- Синхронизация с Sheets (координаторы)

**Gallery.tsx**:
- Сетка проектов
- Фильтры: категория, теги, дата
- Модальное окно с деталями проекта
- Метрики (просмотры, лайки)

**Equipment.tsx**:
- Список оборудования
- Фильтры: категория, статус
- Подача заявки (корзина)
- Мои заявки
- Все заявки (координаторы)

**Settings.tsx**:
- Редактирование профиля
- Фото, био, контакты, навыки
- Портфолио

**UserMonitoring.tsx** (координаторы):
- Список пользователей
- Фильтры и поиск
- Статистика пользователя
- Блокировка/разблокировка
- Изменение баллов

**Support.tsx**:
- Выбор типа обращения (вопрос/предложение)
- Форма с полями
- Прикрепление файлов
- История обращений

**Notifications.tsx** (полноэкранный):
- Список уведомлений
- Фильтры: Все / Непрочитанные / Важные
- Отметка как прочитанное
- Отметить все как прочитанные

#### 6.5.2 Компоненты

**ChatWidget.tsx** (справа снизу):
- Переключатель: Уведомления / Чат
- Уведомления: список с фильтрацией
- Чат: история сообщений, поле ввода
- Без затемнения фона, поверх интерфейса

**TourGuide.tsx**:
- Интерактивный гайд по страницам
- Подсветка элементов (рамка)
- Навигация: Назад / Далее / Завершить
- Автозапуск для новичков

**TaskCard.tsx**:
- Единый формат карточек
- Фото, название, краткое описание
- Статус, приоритет, дедлайн
- Кнопка "Посмотреть" → TaskDetail

**CalendarView.tsx**:
- TimelineView: временная шкала с задачами
- ListView: список задач
- Адаптация под период (семестр/месяц/неделя)

---

## 7. ПЛАН РЕАЛИЗАЦИИ

### 7.1 Этап 1: Базовая функциональность (Неделя 1)

**День 1-2: Google Drive интеграция**
- [ ] Настройка 5 Service Accounts
- [ ] Создание структуры папок
- [ ] Базовые операции (создание, чтение, обновление)
- [ ] Rate limiting и кэширование

**День 3-4: Создание задач**
- [ ] API для создания задач
- [ ] Автоматическое создание папок в Drive
- [ ] Создание файлов ТЗ
- [ ] FSM в боте для создания задач
- [ ] Форма на сайте

**День 5-7: Карточки задач и календарь**
- [ ] Карточка задачи с переключением ролей
- [ ] Календарь: Период + Представление
- [ ] Таймлайн и список
- [ ] Фильтры и навигация

### 7.2 Этап 2: Интеграции (Неделя 2)

**День 1-2: Синхронизация Google Drive**
- [ ] Двусторонняя синхронизация
- [ ] Webhooks / Polling
- [ ] Обработка конфликтов
- [ ] Уведомления об изменениях

**День 3-4: Google Sheets синхронизация**
- [ ] Создание/обновление таблицы
- [ ] Окрашивание ячеек
- [ ] Гиперссылки на файлы
- [ ] Обработка ручных изменений

**День 5-7: Интеграция оборудования и чатов**
- [ ] Выдача оборудования в системе
- [ ] Предложение оборудования при взятии задачи
- [ ] Управление чатами Telegram
- [ ] Добавление пользователей в чаты

### 7.3 Этап 3: Улучшения (Неделя 3)

**День 1-3: Геймификация**
- [ ] Начисление баллов
- [ ] Уровни и рейтинг
- [ ] Достижения
- [ ] Лидерборд

**День 4-5: Мониторинг и профили**
- [ ] Мониторинг пользователей
- [ ] Редактирование профиля
- [ ] Статистика активности

**День 6-7: Уведомления и поддержка**
- [ ] Система уведомлений
- [ ] Чат поддержки
- [ ] Фильтрация уведомлений

### 7.4 Этап 4: AI и финальные улучшения (Неделя 4)

**День 1-3: AI-интеграция**
- [ ] Настройка OpenRouter API
- [ ] Анализ задач и концептов
- [ ] Проверка на "ИИшность"
- [ ] AI-чат для координаторов

**День 4-5: Автоматизация**
- [ ] Напоминания о дедлайнах
- [ ] Автоматические уведомления
- [ ] Сценарии автоматизации

**День 6-7: Финальные улучшения**
- [ ] Оптимизация производительности
- [ ] Тестирование
- [ ] Документация
- [ ] Деплой

---

## 8. ЗАКЛЮЧЕНИЕ

### 8.1 Ваши конкурентные преимущества

1. **Специализация**: Система создана именно для PR-отдела
2. **Геймификация**: Мотивация через баллы и рейтинг
3. **Telegram-интеграция**: Основной канал коммуникации
4. **Бесплатность**: Полностью бесплатно
5. **Локальность**: Настроено под ваши процессы

### 8.2 Что взять из конкурентов

1. **Из Битрикс24**: Интерфейс, представления календаря, AI-помощник
2. **Из AMOCRM**: Автоматизация, уведомления в реальном времени

### 8.3 Что НЕ нужно

1. CRM-функционал (сделки, клиенты)
2. Телефония
3. Платежи
4. Email-маркетинг

### 8.4 Финальная рекомендация

**Продолжайте разработку!** Ваша система имеет чёткие конкурентные преимущества и решает конкретную задачу лучше, чем универсальные CRM. Следуйте новой архитектуре, фокусируйтесь на ключевых фичах, и система будет успешной.

---

**Документ создан:** 2025-01-09
**Версия архитектуры:** 2.0
**Статус:** Готово к реализации
