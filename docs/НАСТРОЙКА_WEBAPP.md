# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram WebApp –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ

1. **Backend (–±–æ—Ç):**
   - ‚úÖ –ò–º–ø–æ—Ä—Ç `WebAppInfo` –∏–∑ `aiogram.types`
   - ‚úÖ WebApp –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FRONTEND_URL` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫

2. **Frontend:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `window.Telegram?.WebApp`
   - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ WebApp
   - ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ WebApp —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π hash

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebApp –≤ Telegram –±–æ—Ç–µ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ @BotFather

**–í–ê–ñ–ù–û:** WebApp **–ù–ï —Ç—Ä–µ–±—É–µ—Ç** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ @BotFather –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö. –ö–Ω–æ–ø–∫–∏ WebApp —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏:
- –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å `web_app=WebAppInfo(url="...")`

**–ù–û:** –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å WebApp –≤ –º–µ–Ω—é –±–æ—Ç–∞ (–∫–Ω–æ–ø–∫–∞ –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞), –Ω—É–∂–Ω–æ:

1. –û—Ç–∫—Ä–æ–π @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏ "Bot Settings" ‚Üí "Menu Button"
5. –í—ã–±–µ—Ä–∏ "Configure Menu Button"
6. –í—ã–±–µ—Ä–∏ "Web App"
7. –í–≤–µ–¥–∏ URL: `https://your-frontend-url.com` (—Ç–≤–æ–π FRONTEND_URL)

---

## ‚úÖ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ WebApp —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–ø–æ—Å–æ–± 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–æ–∫ –≤ –±–æ—Ç–µ

1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/start` (–µ—Å–ª–∏ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
3. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ **"üåê –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (WebApp)"**
4. –ù–∞–∂–º–∏ –Ω–∞ –Ω–µ—ë
5. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è WebApp –≤–Ω—É—Ç—Ä–∏ Telegram (–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!)
   - –í–∏–¥–Ω–∞ —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–¥

**–í –±–æ—Ç–µ (`handlers.py`):**
```python
# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è WebAppInfo
InlineKeyboardButton(
    text="üåê –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (WebApp)", 
    web_app=WebAppInfo(url=f"{settings.FRONTEND_URL}/register")
)
```

**–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`Register.tsx`):**
```javascript
// –ü—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
console.log('WebApp available:', !!window.Telegram?.WebApp)
console.log('User data:', window.Telegram?.WebApp?.initDataUnsafe?.user)
```

### –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**–í –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üì° Bot will use API URL: ...
```

**–í –ª–æ–≥–∞—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞):**
```
WebApp available: true
User data: {id: ..., first_name: ..., ...}
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–Ω–æ–ø–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp

**–ü—Ä–∏—á–∏–Ω—ã:**
- URL –Ω–µ HTTPS (–Ω—É–∂–µ–Ω HTTPS!)
- URL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–ø—Ä–æ–≤–µ—Ä—å Railway –¥–µ–ø–ª–æ–π)
- –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `FRONTEND_URL` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`
2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —ç—Ç–æ–º—É URL
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –±–æ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 2: WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –Ω–µ —á–µ—Ä–µ–∑ WebApp –∫–Ω–æ–ø–∫—É
- Telegram WebApp API –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ –±–æ—Ç–µ (–Ω–µ —á–µ—Ä–µ–∑ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É)
2. –ü—Ä–æ–≤–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏: `window.Telegram?.WebApp` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–æ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∞ "Button_type_invalid"

**–ü—Ä–∏—á–∏–Ω–∞:**
- WebApp –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ **–ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö** (–Ω–µ –≤ –≥—Ä—É–ø–ø–∞—Ö!)

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π WebApp –∫–Ω–æ–ø–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å –±–æ—Ç–æ–º
- –í –≥—Ä—É–ø–ø–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π –æ–±—ã—á–Ω—ã–µ URL-–∫–Ω–æ–ø–∫–∏

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `FRONTEND_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (Railway)
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- [ ] WebApp –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–¥ –±–æ—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp –≤–Ω—É—Ç—Ä–∏ Telegram
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ WebApp

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram**
2. **–û—Ç–ø—Ä–∞–≤—å `/start`** (–µ—Å–ª–∏ –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
3. **–ù–∞–∂–º–∏ "üåê –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (WebApp)"**
4. **–ü—Ä–æ–≤–µ—Ä—å:**
   - ‚úÖ WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Telegram
   - ‚úÖ –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∏–¥–Ω–∞
   - ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å —Å–æ–≥–ª–∞—Å–∏—è –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
   - ‚úÖ –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram WebApp](https://core.telegram.org/bots/webapps)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è aiogram WebApp](https://docs.aiogram.dev/en/v3.18.0/api/types/inline_keyboard_button.html)

---

**–î–∞—Ç–∞:** 2025-01-09
