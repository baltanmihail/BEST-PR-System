# Информация о сессиях в BEST PR System

## Как работает сессия

### JWT токен
- **Хранение**: Токен сохраняется в `localStorage` браузера
- **Длительность**: 24 часа (1440 минут) - настраивается в `ACCESS_TOKEN_EXPIRE_MINUTES`
- **Прерывание**: Сессия НЕ прерывается при закрытии страницы
- **Истечение**: Токен истекает через 24 часа после создания

### Что происходит при закрытии страницы
1. **Токен остаётся в localStorage** - он не удаляется автоматически
2. **При открытии сайта снова** - токен проверяется автоматически
3. **Если токен валиден** - пользователь автоматически входит в систему
4. **Если токен истёк** - пользователь должен войти заново (через QR-код или Telegram WebApp)

### Автоматический вход
- **Через Telegram WebApp**: Если пользователь открыл сайт через бота, система автоматически пытается войти через `/auth/bot-login`
- **Через сохранённый токен**: При загрузке сайта проверяется токен из localStorage

### QR-код сессия
- **Длительность**: 5 минут (настраивается в `generate_qr`)
- **Статусы**: `pending` → `confirmed` / `expired` / `cancelled`
- **После подтверждения**: Создаётся JWT токен на 24 часа

## Рекомендации
- Токен автоматически обновляется при каждом успешном запросе к API (если настроено)
- При истечении токена пользователь увидит ошибку 401 и будет перенаправлен на `/login`
- Для безопасности рекомендуется периодически обновлять токен
