# Настройка передачи ownership файлов Google Drive

## Быстрая настройка

### 1. Добавьте переменную окружения в Railway

В настройках сервиса `best-pr-api` добавьте:

```env
GOOGLE_DRIVE_OWNER_EMAIL=mikhail.baltyan@bmstu-best.ru
```

### 2. Что произойдёт

**Новые файлы:**
- Все новые файлы, папки и таблицы будут автоматически передаваться вам в ownership
- Они будут использовать вашу квоту (2 GB из доступных), а не квоту сервисного аккаунта

**Существующие файлы:**
- Старые файлы останутся у сервисного аккаунта
- Их можно передать вручную или оставить как есть
- Они не будут мешать работе системы

### 3. Передача ownership существующих файлов (опционально)

Если хотите передать ownership уже созданных файлов:

#### Вариант A: Через Google Drive веб-интерфейс

1. Откройте папку "BEST PR System Bot" в Google Drive
2. Выделите все файлы и папки (Ctrl+A)
3. Правой кнопкой → "Настроить доступ" (Share)
4. Добавьте `mikhail.baltyan@bmstu-best.ru` как "Владелец" (Owner)
5. Удалите доступ сервисного аккаунта (опционально)

#### Вариант B: Через скрипт (автоматически)

Можно создать скрипт для массовой передачи ownership всех файлов в папке.

## Проверка

После добавления переменной окружения:

1. Перезапустите сервис на Railway
2. Проверьте логи - должны быть сообщения:
   ```
   ✅ Ownership таблицы 'BEST PR System - Таймлайны' передан пользователю mikhail.baltyan@bmstu-best.ru
   ✅ Ownership папки 'Admin' передан пользователю mikhail.baltyan@bmstu-best.ru
   ```
3. Проверьте в Google Drive - новые файлы должны быть у вас в ownership

## Важно

- **Не нужно удалять существующую папку** - система будет использовать её дальше
- Новые файлы автоматически будут передаваться вам
- Старые файлы можно передать вручную или оставить как есть
- Система продолжит работать даже если передача ownership не удалась (будет предупреждение в логах)

## Если передача ownership не работает

Возможные причины:
1. Сервисный аккаунт не имеет прав на изменение прав доступа
2. Email указан неправильно
3. Пользователь не существует или не имеет доступа к Google Drive

**Решение:**
- Проверьте логи на ошибки
- Убедитесь, что сервисный аккаунт имеет права "Editor" или "Owner" на папку
- Проверьте правильность email адреса
